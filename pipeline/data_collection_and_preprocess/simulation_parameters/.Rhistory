rm(list=ls())
library(tidyverse)
library(sleepsimR)
# Load data
data("sleepdata")
library(sleepsimRdata)
# Load data
data("sleepdata")
# Select these channels
selected_channels <- c("EOG_min_beta", "EOG_median_theta", "EEG_Fpz_Cz_mean_beta")
# Filter the data
io <- ait %>%
filter(var %in% selected_channels) %>%
# Pivot to wide
pivot_wider(id_cols = c(identifier, epoch, sleep_state), names_from = var, values_from = val) %>%
# Remove epochs
select(-epoch)
# Filter the data
io <- sleepdata %>%
filter(var %in% selected_channels) %>%
# Pivot to wide
pivot_wider(id_cols = c(identifier, epoch, sleep_state), names_from = var, values_from = val) %>%
# Remove epochs
select(-epoch)
# Filter the data
io <- sleepdata %>%
filter(var %in% selected_channels)# %>%
# Filter the data
io <- sleepdata %>%
gather(var, val, -id, -sleep_state)
# Filter the data
io <- sleepdata %>%
gather(var, val, -id, -sleep_state) %>%
filter(var %in% selected_channels) %>%
# Pivot to wide
pivot_wider(id_cols = c(identifier, epoch, sleep_state), names_from = var, values_from = val) %>%
# Remove epochs
select(-epoch)
# Filter the data
io <- sleepdata %>%
gather(var, val, -id, -sleep_state) %>%
filter(var %in% selected_channels) %>%
# Pivot to wide
pivot_wider(id_cols = c(id, epoch, sleep_state), names_from = var, values_from = val) %>%
# Remove epochs
select(-epoch)
View(io)
# Filter the data
io <- sleepdata %>%
group_by(id) %>%
mutate(epoch=1:n()) %>%
ungroup() %>%
gather(var, val, -id, -sleep_state) %>%
filter(var %in% selected_channels) %>%
# Pivot to wide
pivot_wider(id_cols = c(id, epoch, sleep_state), names_from = var, values_from = val) %>%
# Remove epochs
select(-epoch)
# Filter the data
io <- sleepdata %>%
group_by(id) %>%
mutate(epoch=1:n()) %>%
ungroup() %>%
gather(var, val, -id, -sleep_state, -epoch) %>%
filter(var %in% selected_channels) %>%
# Pivot to wide
pivot_wider(id_cols = c(id, epoch, sleep_state), names_from = var, values_from = val) %>%
# Remove epochs
select(-epoch)
View(io)
# Filter the data
io <- sleepdata[,selected_channels]
# Filter the data
io <- sleepdata[,selected_channels] %>%
rename(identifier = id)
# Load data
data("sleepdata")
# Select these channels
selected_channels <- c("EOG_min_beta", "EOG_median_theta", "EEG_Fpz_Cz_mean_beta")
# Filter the data
io <- sleepdata[,selected_channels] %>%
rename(identifier = id)
?rename
# Filter the data
io <- sleepdata[,selected_channels]
# Filter the data
io <- sleepdata[,c("id", "sleep_state", selected_channels)]
View(io)
io$identifier <- io$id
io$id <- NULL
# Get unique identifiers
# Map to numeric 1-len(identifer))
uid <- unique(as.character(io$identifier))
ids <- 1:length(uid)
names(ids) <- uid
io$id <- unname(ids[as.character(io$identifier)])
io$identifier <- NULL
io <- io[,c(5, 1, 2, 3, 4)]
head(io)
# Filter the data
io <- sleepdata[,c("id", "sleep_state", selected_channels)]
io$identifier <- io$id
io$id <- NULL
# Get unique identifiers
# Map to numeric 1-len(identifer))
uid <- unique(as.character(io$identifier))
ids <- 1:length(uid)
names(ids) <- uid
io$id <- unname(ids[as.character(io$identifier)])
io$identifier <- NULL
# Filter the data
io <- sleepdata[,c("id", "sleep_state", selected_channels)]
# Get unique identifiers
# Map to numeric 1-len(identifer))
uid <- unique(as.character(io$identifier))
# Get unique identifiers
# Map to numeric 1-len(identifer))
uid <- unique(as.character(io$id))
ids <- 1:length(uid)
names(ids) <- uid
names(ids)
io$id <- unname(ids[as.character(io$identifier)])
io$id <- unname(ids[as.character(io$id)])
head(io)
io <- io[,c(1,2,5,4,3)]
head(io)
library(ggplot2)
io %>%
gather(var, val, -sleep_state, -id) %>%
ggplot(aes(x=val, fill=sleep_state)) +
geom_density(alpha = 0.4) +
facet_wrap(". ~ var", ncol=3)
io %>%
gather(var, val, -sleep_state, -id) %>%
group_by(id, var, sleep_state) %>%
summarize(avgch = mean(val)) %>%
ggplot(aes(x=avgch, fill=sleep_state)) +
geom_density(alpha=0.4) +
facet_wrap("var ~ .")
# Get summary statistics for each dep var
ss <- io %>%
gather(variable, value, -id, -sleep_state) %>%
group_by(id, variable, sleep_state) %>%
summarize(mvar = mean(value)) %>%
ungroup() %>%
group_by(variable, sleep_state) %>%
summarize(mmvar = mean(mvar),
vvvar = var(mvar))
print(ss)
ss
